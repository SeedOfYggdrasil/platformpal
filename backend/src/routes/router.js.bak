// ../backend/src/routes/router.js

import express from 'express';
import axios from 'axios';
// import ImageKit from 'imagekit'
import upload from '../middleware/upload.js';
// import getUpload from '../utilities/getUpload.js';

const router = express.Router();

// Upload Route
router.post('/upload', upload, (req, res) => {
  if (!req.files || req.files.length === 0) {
    return res.status(400).json({ error: 'No files uploaded' });
  }
  res.status(200).json({ message: 'Upload Successful', files: req.files });
});

// INCOMPLETE/NONFUNCTIONAL

// Image Prompt Route
router.get('/img-prompt', (req, res) => {
  const inputImages = getUpload();
  
  const imagePrompt = {
    task: "resize_images",
    description: "Resize all images to match the specifications of each image type for each social media platform. Avoid operations that may reduce quality, such as compression or filetype conversion. Do not crop, warp, or distort the images. Preserve resolution and aspect ratio, and fill empty space with solid black pixels.",
    data: {
      input_images: inputImages
    },
      output: {
          "Instagram": {
            "Profile Photo": "320x320",
            "Landscape": "1080x566",
            "Portrait": "1080x1350",
            "Square": "1080x1080",
            "Stories": "1080x1920",
            "Cover Photo": "N/A",
            "Banner": "N/A",
            "Thumbnail": "N/A"
          },
          "Facebook": {
            "Profile Photo": "170x170",
            "Landscape": "1200x630",
            "Portrait": "630x1200",
            "Square": "1200x1200",
            "Stories": "1080x1920",
            "Cover Photo": "820x312",
            "Banner": "N/A",
            "Thumbnail": "N/A"
          },
          "Twitter": {
            "Profile Photo": "400x400",
            "Landscape": "1600x900",
            "Portrait": "1080x1350",
            "Square": "1080x1080",
            "Stories": "N/A",
            "Cover Photo": "1500x500",
            "Banner": "N/A",
            "Thumbnail": "N/A"
          },
          "LinkedIn": {
            "Profile Photo": "400x400",
            "Landscape": "1200x627",
            "Portrait": "627x1200",
            "Square": "1080x1080",
            "Stories": "N/A",
            "Cover Photo": "1128x191",
            "Banner": "N/A",
            "Thumbnail": "N/A"
          },
          "TikTok": {
            "Profile Photo": "200x200",
            "Landscape": "N/A",
            "Portrait": "1080x1920",
            "Square": "1080x1080",
            "Stories": "1080x1920",
            "Cover Photo": "N/A",
            "Banner": "N/A",
            "Thumbnail": "N/A"
          },
          "Etsy": {
            "Profile Photo": "500x500",
            "Landscape": "N/A",
            "Portrait": "N/A",
            "Square": "2000x2000",
            "Stories": "N/A",
            "Cover Photo": "3360x840",
            "Banner": "3360x840",
            "Thumbnail": "570x456"
          },
          "YouTube": {
            "Profile Photo": "800x800",
            "Landscape": "1280x720",
            "Portrait": "N/A",
            "Square": "N/A",
            "Stories": "N/A",
            "Cover Photo": "2048x1152",
            "Banner": "2048x1152",
            "Thumbnail": "1280x720"
          },
          "Tumblr": {
            "Profile Photo": "128x128",
            "Landscape": "1280x750",
            "Portrait": "1280x1920",
            "Square": "500x500",
            "Stories": "N/A",
            "Cover Photo": "3000x1055",
            "Banner": "3000x1055",
            "Thumbnail": "N/A"
          }
        }
      }
    }
  };

  const prompt = res.json(imagePrompt);
});

// AI Image Editor API Route
router.post('/img-resize', (req, res) =>
	const imageResize = () => {
		const apiEndpoint = process.env.API_ENDPOINT;
		const apiKey = process.env.API_Key;
		
		const imagekit = new ImageKit({
		    publicKey : "public_0AP8T9gRmEdXjMXfC1Fb0o2Z19I=",
		    privateKey : "private_fT8HGZ+sXP2ytTyXnrvTKcvzpAU=",
		    urlEndpoint : "https://ik.imagekit.io/platformpal"
		});
		
	}
)


export default router;
